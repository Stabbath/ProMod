; =====================================================
; ================= CAR ALARM EVENT ===================
; =====================================================
add:
; --- exit from house
{
	; fence continuation
	"solid" "6"
	"origin" "-947 5921 265"
	"angles" "0 90 0"
	"model" "models/props_urban/wood_railing002_64.mdl"
	"classname" "prop_dynamic"
}
{
	; corpse
	"solid" "6"
	"origin" "-910 5899 265"
	"angles" "0 178.5 0"
	"model" "models/deadbodies/dead_male_civilian_body.mdl"
	"classname" "prop_dynamic"
}
{
	; radio
	"solid" "6"
	"origin" "-917 5879 255"
	"angles" "-11 342.5 23.5"
	"model" "models/deadbodies/dead_male_civilian_radio.mdl"
	"classname" "prop_dynamic"
}
{
	; ladder
	"solid" "6"
	"origin" "-933 5899 316"
	"angles" "-36 178 1"
	"model" "models/props/cs_assault/ladderaluminium128.mdl"
	"classname" "prop_dynamic"
}
{
    ; invisible block to the right
    "origin" "-944 5908 356"
    "angles" "0 90 0"
    "mins" "-48 -20 -92"
    "maxs" "48 20 92"
    "boxmins" "-48 -20 -92"
    "boxmaxs" "48 20 92"
    "initialstate" "1"
    "BlockType" "1"
    "classname" "env_physics_blocker"
}
{
    ; invisible block along the fence
    "origin" "-988 5700 356"
    "angles" "0 0 0"
    "mins" "-4 -188 -92"
    "maxs" "4 188 92"
    "boxmins" "-4 -188 -92"
    "boxmaxs" "4 188 92"
    "initialstate" "1"
    "BlockType" "1"
    "classname" "env_physics_blocker"
}
{
    ; invisible block on drop - left
    "origin" "-924 5548 356"
    "angles" "0 -15 0"
    "mins" "-4 -28 -92"
    "maxs" "4 28 92"
    "boxmins" "-4 -28 -92"
    "boxmaxs" "4 28 92"
    "initialstate" "1"
    "BlockType" "1"
    "classname" "env_physics_blocker"
}
    ; invisible block on drop - front
    "origin" "-940 5516 356"
    "angles" "0 0 0"
    "mins" "-44 -4 -92"
    "maxs" "44 4 92"
    "boxmins" "-44 -4 -92"
    "boxmaxs" "44 4 92"
    "initialstate" "1"
    "BlockType" "1"
    "classname" "env_physics_blocker"
}
{
    ; invisible block to prevent SI getting glitched on ladder
    "origin" "-944 5908 286"
    "angles" "0 0 0"
    "mins" "-48 -20 -22"
    "maxs" "48 20 22"
    "boxmins" "-48 -20 -22"
    "boxmaxs" "48 20 22"
    "initialstate" "1"
    "BlockType" "2"
    "classname" "env_physics_blocker"
}
; --- ground level door barricading
{
	; indoors bookshelf
	"solid" "6"
	"origin" "-871 5739 103"
	"angles" "0 341.5 0"
	"model" "models/props/cs_office/bookshelf2.mdl"
	"classname" "prop_dynamic"
}
{
	; pile of corpses
	"solid" "6"
	"origin" "-904 5748 96"
	"angles" "0 173 0"
	"model" "models/deadbodies/cemetary/barricade_a.mdl"
	"classname" "prop_dynamic"
}
{
	; metal plate to block early alarm car setting off
	"solid" "6"
	"origin" "-943 5669 152"
	"angles" "86 55 -26.5"
	"model" "models/props_urban/metal_plate001.mdl"
	"classname" "prop_dynamic"
}
; --- left side barricade + box stacks
;
{
	; barricade fence long
	"solid" "6"
	"origin" "-842 5444 97"
	"angles" "0 171.5 0"
	"model" "models/props_urban/fence_cover001_256.mdl"
	"classname" "prop_dynamic"
}
{
	; barricade fence short
	"solid" "6"
	"origin" "-868 5262 97"
	"angles" "0 172 0"
	"model" "models/props_urban/fence_cover001_128.mdl"
	"classname" "prop_dynamic"
}
{
	; large crate against alarmed car
	"solid" "6"
	"origin" "-904 5512 86"
	"angles" "0 65.5 0"
	"model" "models/props/cs_militia/crate_extralargemill.mdl"
	"classname" "prop_dynamic"
}
{
	; barricade on top of large crate
	"solid" "6"
	"origin" "-908 5505 214"
	"angles" "0 68.5 0"
	"model" "models/props_unique/wooden_barricade.mdl"
	"classname" "prop_dynamic"
}
{
	; log against alarmed car
	"solid" "6"
	"origin" "-950 5440 183"
	"angles" "6 92 -85.5"
	"model" "models/props_foliage/swamp_fallentree01_bare.mdl"
	"classname" "prop_dynamic"
}
{
	; box line 1
	"solid" "6"
	"origin" "-1001 5380 94"
	"angles" "0 196.5 0"
	"model" "models/props_unique/spawn_apartment/boxes_rooftop.mdl"
	"classname" "prop_dynamic"
}
{
	; box line 2
	"solid" "6"
	"origin" "-989 5319 94"
	"angles" "0 188 0"
	"model" "models/props_unique/spawn_apartment/boxes_rooftop.mdl"
	"classname" "prop_dynamic"
}
{
	; box stack top
	"solid" "6"
	"origin" "-981 5347 135"
	"angles" "0 188 0"
	"model" "models/props/cs_militia/boxes_frontroom.mdl"
	"classname" "prop_dynamic"
}
{
	; corpses leaning against boxes
	"solid" "6"
	"origin" "-1051 5386 95"
	"angles" "0 5 0"
	"model" "models/deadbodies/cemetary/corner_a.mdl"
	"classname" "prop_dynamic"
}
{
	; corpses piled against fence
	"solid" "0"
	"origin" "-1189 5452 96"
	"angles" "0 179 0"
	"model" "models/deadbodies/bodies128_a.mdl"
	"classname" "prop_dynamic"
}
{
    ; invisible block over green fence
    "origin" "-872 5384 268"
    "angles" "0 0 0"
    "mins" "-8 -168 -180"
    "maxs" "8 168 180"
    "boxmins" "-8 -168 -180"
    "boxmaxs" "8 168 180"
    "initialstate" "1"
    "BlockType" "1"
    "classname" "env_physics_blocker"
}
; --- right side barricade
{
	; vertical plank 1 (against car)
	"solid" "6"
	"origin" "-650 5984 189"
	"angles" "-2 280 90"
	"model" "models/props_swamp/plank001b_192.mdl"
	"classname" "prop_dynamic"
}
{
	; vertical plank 2
	"solid" "6"
	"origin" "-654 6026 192"
	"angles" "-2 270 90"
	"model" "models/props_swamp/plank001b_192.mdl"
	"classname" "prop_dynamic"
}
{
	; vertical plank 3
	"solid" "6"
	"origin" "-649 6069 187"
	"angles" "-1 260 90"
	"model" "models/props_swamp/plank001b_192.mdl"
	"classname" "prop_dynamic"
}
{
	; vertical plank 4
	"solid" "6"
	"origin" "-643 6115 183"
	"angles" "-1 88.5 89"
	"model" "models/props_swamp/plank001b_192.mdl"
	"classname" "prop_dynamic"
}
{
	; horizontal plank
	"solid" "6"
	"origin" "-656 6036 191"
	"angles" "84.5 100 -79.5"
	"model" "models/props_swamp/plank001a_192.mdl"
	"classname" "prop_dynamic"
}
{
	; plank on car
	"solid" "6"
	"origin" "-688 6017 173"
	"angles" "1 0 131.5"
	"model" "models/props_swamp/plank001b_192.mdl"
	"classname" "prop_dynamic"
}
{
	; crate
	"solid" "6"
	"origin" "-688 6132 94"
	"angles" "0 65.5 0"
	"model" "models/props/de_nuke/crate_small.mdl"
	"classname" "prop_dynamic"
}
{
	; window plywood board 1
	"solid" "6"
	"origin" "-718 5948 299"
	"angles" "90 90 0"
	"model" "models/props_highway/plywood_02.mdl"
	"classname" "prop_dynamic"
}
{
	; window plywood board 2
	"solid" "6"
	"origin" "-818 5948 299"
	"angles" "90 90 0"
	"model" "models/props_highway/plywood_02.mdl"
	"classname" "prop_dynamic"
}
{
	; car
	"solid" "6"
	"origin" "-777 6016 96"
	"angles" "0 170.5 0"
	"model" "models/props_vehicles/cara_95sedan.mdl"
	"classname" "prop_dynamic"
}
{
	; car windshield
	"solid" "6"
	"origin" "-777 6016 96"
	"angles" "0 170.5 0"
	"model" "models/props_vehicles/cara_95sedan_glass.mdl"
	"classname" "prop_dynamic"
}
{
	; corpse on car
	"solid" "6"
	"origin" "-846 6025 137"
	"angles" "4.5 118 -2.5"
	"model" "models/deadbodies/milltownrain/pose_a.mdl"
	"classname" "prop_dynamic"
}
{
	; pile of corpses in front of car
	"solid" "6"
	"origin" "-931 6016 95"
	"angles" "0 48 0"
	"model" "models/deadbodies/deepswamp/oval_192_c.mdl"
	"classname" "prop_dynamic"
}
{
    ; invisible block
    "origin" "-646 6056 264"
    "angles" "0 352 0"
    "mins" "-18 -93 -168"
    "maxs" "18 93 168"
    "boxmins" "-18 -93 -168"
    "boxmaxs" "18 93 168"
    "initialstate" "1"
    "BlockType" "1"
    "classname" "env_physics_blocker"
}
; --- other stuff
{
	; cop car
	"solid" "6"
	"origin" "-1205 5838 102"
	"angles" "0 41.5 0"
	"model" "models/props_vehicles/police_car_opentrunk.mdl"
	"classname" "prop_dynamic"
}
{
	; cop car windshield
	"solid" "6"
	"origin" "-1205 5838 102"
	"angles" "0 41.5 0"
	"model" "models/props_vehicles/police_car_glass.mdl"
	"classname" "prop_dynamic"
}
{
	; cop car lights
	"solid" "6"
	"origin" "-1205 5838 102"
	"angles" "0 41.5 0"
	"model" "models/props_vehicles/police_car_lightbar.mdl"
	"classname" "prop_dynamic"
}
{
	; corpse against cop car
	"solid" "6"
	"origin" "-1269 5947 102"
	"angles" "0 125 0"
	"model" "models/deadbodies/deepswamp/pose_c.mdl"
	"classname" "prop_dynamic"
}
{
	; pile of corpses near cop car
	"solid" "6"
	"origin" "-1142 5937 98"
	"angles" "0 48 0"
	"model" "models/deadbodies/default/barricade_c.mdl"
	"classname" "prop_dynamic"
}
{
	; cop car ammo
	"spawnflags" "3"
	"solid" "6"
	"count" "5"
	"origin" "-1142 5764 127"
	"angles" "0 302 0"
	"classname" "weapon_ammo_spawn"
}
{
	; blue broken truck
	"solid" "6"
	"origin" "-970 6400 148"
	"angles" "0 318.5 0"
	"model" "models/props_vehicles/truck001a.mdl"
	"classname" "prop_dynamic"
}
{
	; wood stack - blue broken truck cargo
	"solid" "6"
	"origin" "-992 6426 116"
	"angles" "0 139.5 0"
	"model" "models/props_mill/wood_stack.mdl"
	"classname" "prop_dynamic"
}
{
	; pile of corpses near white knocked-down fence
	"solid" "6"
	"origin" "-1270 6139 98"
	"angles" "0 118.5 0"
	"model" "models/deadbodies/bodies_oval_192.mdl"
	"classname" "prop_dynamic"
}
filter:
; --- remove upstairs doors in house
{
    ; 2 doors upstairs
    "targetname" "door_scavenge_delete"
}
modify:
; --- alarm car movement from yard sale house
{
    match:
    {
        ; alarmed car
        "hammerid" "2834020"
    }
    replace:
    {
        "origin" "-989 5567 128"
        "angles" "0 237 0"
    }
}
{
    match:
    {
        ; alarmed car glass on
        "hammerid" "2834029"
    }
    replace:
    {
        "origin" "-988 5567 128"
        "angles" "0 237 0"
    }
}
{
    match:
    {
        ; alarmed car glass off
        "hammerid" "2834937"
    }
    replace:
    {
        "origin" "-988 5567 128"
        "angles" "0 237 0"
    }
}
{
    match:
    {
        ; headlight beam right
        "hammerid" "2834050" 
    }
    replace:
    {
        "origin" "-1066 5501 156"
        "angles" "0 237 0"
    }
}
{
    match:
    {
        ; headlight beam left
        "hammerid" "2834048"
    }
    replace:
    {
        "origin" "-1016 5470 156"
        "angles" "0 237 0"
    }
}
{
    match:
    {
        ; chirp sound
        "hammerid" "2834026"
    }
    replace:
    {
        "origin" "-982 5536 207"
    }
}
{
    match:
    {
        ; alarm sound
        "hammerid" "2834045"
    }
    replace:
    {
        "origin" "-951 5548 207"
    }
}
{
    match:
    {
        ; red tail light right
        "hammerid" "2834036"
    }
    replace:
    {
        "origin" "-951 5670 157"
        "angles" "0 237 0"
    }
}
{
    match:
    {
        ; red tail light left
        "hammerid" "2834033"
    }
    replace:
    {
        "origin" "-912 5643 157"
        "angles" "0 237 0"
    }
}
{
    match:
    {
        ; white headlight sprite right
        "hammerid" "2834042"
    }
    replace:
    {
        "origin" "-1073 5503 159"
        "angles" "0 237 0"
    }
}
{
    match:
    {
        ; white headlight sprite left
        "hammerid" "2834039"
    }
    replace:
    {
        "origin" "-1016 5462 159"
        "angles" "0 237 0"
    }
}
; --- enable the alarm car on map spawn
modify:
{
    match:
    {
        "hammerid" "2835002"
    }
    replace:
    {
        "OnMapSpawn" "relay_caralarm_on-car2Trigger0-1"
    }
}
add:
; --- readd a new car where yard sale car was
{
	; car at yard sale
    "solid" "6"
	"origin" "1370 2992 128"
	"angles" "0 120 0"
    "rendercolor" "138 37 9"
	"model" "models/props_vehicles/cara_95sedan.mdl"
	"classname" "prop_physics"
    "targetname" "car_replacement"
}
{
	; car windshield
    "solid" "6"
	"origin" "1370 2992 128"
	"angles" "0 120 0"
	"model" "models/props_vehicles/cara_95sedan_glass.mdl"
	"classname" "prop_dynamic"
    "parentname" "car_replacement"
}
; =====================================================


; =====================================================
; ================  EXPLOITS BLOCKED  =================
; =====================================================
; -- updated (exploits v.29): 2013-02-11 - 17:07
add:
; --- block jumping to wooden board from saferoom door for jesus spots/camping spots
{
    ; invisible block above wooden board
    "origin" "4144 -1423 391"
    "mins" "-48 -1 -39"
    "maxs" "48 1 39"
    "initialstate" "1"
    "BlockType" "1"
    "classname" "env_physics_blocker"
}
; --- prevent SI getting unteleportably stuck behind fence near saferoom
{
	; cardboard boxes near fence
	"solid" "6"
	"origin" "3644 -1736 100"
	"angles" "0 0 0"
	"model" "models/props/cs_militia/boxes_frontroom.mdl"
    "disableshadows" "1"
	"classname" "prop_dynamic"
}
{
    ; invisible block above boxes to boost height
    "origin" "3671 -1713 132"
    "angles" "0 -15 0"
    "mins" "-41 -15 -34"
    "maxs" "41 15 42"
    "boxmins" "-41 -15 -34"
    "boxmaxs" "41 15 42"
    "initialstate" "1"
    "BlockType" "2"
    "classname" "env_physics_blocker"
}
; --- prevent SI getting unteleportably stuck behind two hedges near saferoom
{
    ; invisible block in hole near hedge (outside fence)
    "origin" "3668 -1664 132"
    "mins" "-60 -32 -36"
    "maxs" "60 32 60"
    "initialstate" "1"
    "BlockType" "2"
    "classname" "env_physics_blocker"
}
{
    ; invisible block in hole near hedge (inside fence)
    "origin" "3408 -1760 144"
    "mins" "-64 -64 -48"
    "maxs" "64 64 48"
    "initialstate" "1"
    "BlockType" "2"
    "classname" "env_physics_blocker"
}
; --- block climbing generator by saferoom
{
    ; invisible block along generator pole
    "origin" "3460 -1324 276"
    "mins" "-6 -6 -115"
    "maxs" "6 6 115"
    "initialstate" "1"
    "BlockType" "1"
    "classname" "env_physics_blocker"
}
; --- block roof skip by jumping closed 4x4 truck / fence
{
    ; invisible block to avoid jumping the fence
    "origin" "2648 2958 234"
    "mins" "-40 -40 0"
    "maxs" "130 40 80"
    "initialstate" "1"
    "BlockType" "1"
    "classname" "env_player_blocker"
}
; --- avoid jumping onto the roof @ "tank-fight" elevated house
{
    ; invisible block on slanted roof
    "origin" "998 7090 370"
    "mins" "0 -112 0"
    "maxs" "146 0 68"
    "initialstate" "1"
    "BlockType" "1"
    "classname" "env_player_blocker"
}
; --- block hedge jump from roof (with ladder) for easy shortcut
{
    ; invisible block above hedge
    "origin" "-272 5152 244"
    "mins" "-1000 0 0"
    "maxs" "38 68 80"
    "initialstate" "1"
    "BlockType" "1"
    "classname" "env_player_blocker"
}
; --- block jumping from second floor of destroyed house to fence for shortcut
{
    ; invisible block above fence
    "origin" "-640 6592 466"
    "mins" "-4 -64 -238"
    "maxs" "4 64 238"
    "initialstate" "1"
    "BlockType" "1"
    "classname" "env_physics_blocker"
}
; --- block jumping over hedge at playground
{
    ; invisible block over hedge
    "origin" "-1145 6650 244"
    "mins" "-40 0 0"
    "maxs" "40 1000 120"
    "initialstate" "1"
    "BlockType" "1"
    "classname" "env_player_blocker"
}
; --- block climbing on roof near playground by using tree
{
    ; invisible block above tree
    "origin" "-1508 7068 808"
    "mins" "-76 -68 -427"
    "maxs" "76 68 427"
    "initialstate" "1"
    "BlockType" "1"
    "classname" "env_physics_blocker"
}
; =====================================================


; =====================================================
; ================  NUISANCE CHANGES  =================
; =====================================================
add:
; --- prevent SI getting unteleportably stuck behind fence near saferoom
{
	; cardboard boxes near fence
	"solid" "6"
	"origin" "3644 -1736 100"
	"angles" "0 0 0"
	"model" "models/props/cs_militia/boxes_frontroom.mdl"
    "disableshadows" "1"
	"classname" "prop_dynamic"
}
{
    ; invisible block above boxes to boost height
    "origin" "3671 -1713 132"
    "angles" "0 -15 0"
    "mins" "-41 -15 -34"
    "maxs" "41 15 42"
    "boxmins" "-41 -15 -34"
    "boxmaxs" "41 15 42"
    "initialstate" "1"
    "BlockType" "2"
    "classname" "env_physics_blocker"
}
; --- prevent SI getting unteleportably stuck behind two hedges near saferoom
{
    ; invisible block in hole near hedge (outside fence)
    "origin" "3668 -1664 132"
    "mins" "-60 -32 -36"
    "maxs" "60 32 60"
    "initialstate" "1"
    "BlockType" "2"
    "classname" "env_physics_blocker"
}
{
    ; invisible block in hole near hedge (inside fence)
    "origin" "3408 -1760 144"
    "mins" "-64 -64 -48"
    "maxs" "64 64 48"
    "initialstate" "1"
    "BlockType" "2"
    "classname" "env_physics_blocker"
}
; =====================================================


; =====================================================
; ================= NON-RESTRICTIVE ===================
; =====================================================
add:
;       -- added car (4x4) to add spawns to entry of house under construction
{
	; car
        "targetname" "tabbernaut_los"
	"solid" "6"
	"origin" "-309 6860 104"
	"angles" "0 10 0"
	"model" "models/props_vehicles/pickup_truck_78.mdl"
	"classname" "prop_dynamic"
}
{
	; car -- glass
        "targetname" "tabbernaut_los"
	"solid" "6"
	"origin" "-309 6860 104"
	"angles" "0 10 0"
	"model" "models/props_vehicles/pickup_truck_78_glass.mdl"
	"classname" "prop_dynamic"
}
; ----- area before end saferoom
{
	; car
        "targetname" "tabbernaut_los"
	"solid" "6"
	"origin" "-1700 6345 110"
	"angles" "0 120 0"
    "rendercolor" "52 46 46"
	"model" "models/props_vehicles/cara_84sedan.mdl"
	"classname" "prop_dynamic"
}
{
	; car -- glass
        "targetname" "tabbernaut_los"
	"solid" "6"
	"origin" "-1700 6345 110"
	"angles" "0 120 0"
	"model" "models/props_vehicles/cara_84sedan_glass.mdl"
	"classname" "prop_dynamic"
}
{
	; van
        "targetname" "tabbernaut_los"
	"solid" "6"
	"origin" "-2488 7400 98"
	"angles" "0 -38 0"
	"model" "models/props_vehicles/van.mdl"
	"classname" "prop_dynamic"
}
{
	; van -- glass
        "targetname" "tabbernaut_los"
	"solid" "6"
	"origin" "-2488 7400 98"
	"angles" "0 -38 0"
	"model" "models/props_vehicles/van_glass.mdl"
	"classname" "prop_dynamic"
}
{
	; overturned closed 4x4
        "targetname" "tabbernaut_los"
	"solid" "6"
	"origin" "-2690 7298 148"
	"angles" "0 -20 264"
	"model" "models/props_vehicles/suv_2001.mdl"
	"classname" "prop_dynamic"
}

; -------- area right before start saferoom
{
	; dualcab pickup
        "targetname" "tabbernaut_los"
	"solid" "6"
	"origin" "3420 -970 97"
	"angles" "0 40 0"
	"model" "models/props_vehicles/pickup_dually.mdl"
	"classname" "prop_dynamic"
        "rendercolor" "120 80 80"
}
{
	; dualcab pickup -- glass
        "targetname" "tabbernaut_los"
	"solid" "6"
	"origin" "3420 -970 97"
	"angles" "0 40 0"
	"model" "models/props_vehicles/pickup_dually_glass.mdl"
	"classname" "prop_dynamic"
}
;  -- cover leaning against fence for LOS-block
{
	; fence cover
        "targetname" "tabbernaut_los"
	"solid" "6"
	"origin" "4340 -1045 88"
	"angles" "4 -90 0"
	"model" "models/props_urban/fence_cover001_128.mdl"
	"classname" "prop_dynamic"
}
; -------------- car alarm -----------
modify:
{
    match:
    {
        ; car "1"
        "hammerid" "2831936"
    }
    replace:
    {
        ; just enable the alarm by default on mapspawn
        "OnMapSpawn" "relay_caralarm_on-car1Trigger0-1"
    }
}
; ------------------------------------

; -------------- car alarm 2 ---------
modify:
{
    match:
    {
        ; car "4"
        "hammerid" "2838202"
    }
    replace:
    {
        ; just enable the alarm by default on mapspawn
        "OnMapSpawn" "relay_caralarm_on-car4Trigger0-1"
    }
}
; ------------------------------------
; =====================================================